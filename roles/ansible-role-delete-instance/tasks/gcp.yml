---

- name: Include vars for cloud provider
  include_vars:
    file: "{{ cloud_provider }}.yml"
    name: "{{ cloud_provider }}"

- name: Dump gcp vars
  debug:
    var: gcp

- name: Destroy an instance
  gcp_compute_instance:
    name: "{{ gcp['playground'] }}-vm"
    project: "{{ gcp['project'] }}"
    zone: "{{ gcp['zone'] }}"
    auth_kind: "{{ gcp['cred_kind'] }}"
    service_account_file: "{{ gcp['cred_file'] }}"
    scopes: "{{ gcp['scopes'] }}"
    state: absent
  register: instance

- name: Destroy an address
  gcp_compute_address:
    name: "{{ gcp['playground'] }}-address"
    region: "{{ gcp['region'] }}"
    project: "{{ gcp['project'] }}"
    auth_kind: "{{ gcp['cred_kind'] }}"
    service_account_file: "{{ gcp['cred_file'] }}"
    scopes: "{{ gcp['scopes'] }}"
    state: absent
  register: address

# - name: Destroy a network
#   gcp_compute_network:
#     name: "{{ playground }}-network"
#     project: "{{ gcp_project }}"
#     auth_kind: "{{ gcp_cred_kind }}"
#     service_account_file: "{{ gcp_cred_file }}"
#     scopes: "{{ gcp_scopes }}"
#     state: absent
#   register: network

